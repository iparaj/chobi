<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>

<body class="viewer">

<!-- CLOSE -->
<button class="close-btn" onclick="exitViewer()">✕</button>

<!-- LEFT SIDEBAR -->
<div class="sidebar">
  <button onclick="startSlideshow()">▶</button>
  <button onclick="toggleInfo()">ℹ</button>
</div>

<!-- ARROWS -->
<div class="nav-arrow nav-left" onclick="prevImage()">❮</div>
<div class="nav-arrow nav-right" onclick="nextImage()">❯</div>

<!-- IMAGE -->
<div class="viewer-main">
  <img id="mainImage">
</div>

<!-- INFO PANEL -->
<div class="info-panel" id="infoPanel"></div>

<script>
/* ===============================
   BASIC DATA (NO DYNAMIC LOAD)
================================ */
const albumId = new URLSearchParams(window.location.search).get("album") || "album-a";
let currentIndex = parseInt(new URLSearchParams(window.location.search).get("img")) || 1;

// CHANGE THIS COUNT TO MATCH YOUR ALBUM
const IMAGE_COUNT = 5;

let slideshowTimer = null;

/* ===============================
   LOAD IMAGE
================================ */
function loadImage() {
  document.getElementById("mainImage").src =
    `images/${albumId}/${currentIndex}.jpg`;
}

loadImage();

/* ===============================
   NAVIGATION
================================ */
function nextImage() {
  currentIndex++;
  if (currentIndex > IMAGE_COUNT) currentIndex = 1;
  loadImage();
}

function prevImage() {
  currentIndex--;
  if (currentIndex < 1) currentIndex = IMAGE_COUNT;
  loadImage();
}

/* ===============================
   SLIDESHOW (THIS WILL WORK)
================================ */
function startSlideshow() {
  stopSlideshow();
  slideshowTimer = setInterval(nextImage, 3000);
}

function stopSlideshow() {
  if (slideshowTimer) {
    clearInterval(slideshowTimer);
    slideshowTimer = null;
  }
}

/* ===============================
   INFO
================================ */
function toggleInfo() {
  document.getElementById("infoPanel").classList.toggle("show");
}

/* ===============================
   EXIT
================================ */
function exitViewer() {
  stopSlideshow();
  window.location.href = `album.html?album=${albumId}`;
}

/* ===============================
   KEYBOARD
================================ */
document.addEventListener("keydown", e => {
  if (e.key === "ArrowRight") nextImage();
  if (e.key === "ArrowLeft") prevImage();
  if (e.key === "Escape") exitViewer();
});
</script>

</body>
</html>