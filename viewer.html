<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>

<body class="viewer">

<!-- CLOSE -->
<button class="close-btn" onclick="exitViewer()">‚úï</button>

<!-- LEFT SIDEBAR -->
<div class="sidebar">
  <button id="slideshowBtn" onclick="toggleSlideshow()">‚ñ∂</button>
</div>

<!-- ARROWS -->
<div class="nav-arrow nav-left" onclick="prevImage()">‚ùÆ</div>
<div class="nav-arrow nav-right" onclick="nextImage()">‚ùØ</div>

<!-- MAIN IMAGE -->
<div class="viewer-main">
  <img id="mainImage" alt="Viewing image">
</div>

<script>
/* ===============================
   BASIC CONFIG
================================ */
const params = new URLSearchParams(window.location.search);
const albumId = params.get("album") || "album-a";
let currentIndex = parseInt(params.get("img"), 10) || 1;

/* üî¥ CHANGE THIS to number of images in album */
const IMAGE_COUNT = 5;

/* ===============================
   STATE
================================ */
let slideshowTimer = null;
let isPlaying = false;

/* ===============================
   IMAGE LOAD
================================ */
function loadImage() {
  document.getElementById("mainImage").src =
    `images/${albumId}/${currentIndex}.jpg`;
}

loadImage();

/* ===============================
   NAVIGATION
================================ */
function nextImage() {
  currentIndex++;
  if (currentIndex > IMAGE_COUNT) currentIndex = 1;
  loadImage();
}

function prevImage() {
  currentIndex--;
  if (currentIndex < 1) currentIndex = IMAGE_COUNT;
  loadImage();
}

/* ===============================
   SLIDESHOW (PLAY / PAUSE)
================================ */
function startSlideshow() {
  if (isPlaying) return;

  isPlaying = true;
  updatePlayButton();

  slideshowTimer = setInterval(nextImage, 3000);
}

function pauseSlideshow() {
  isPlaying = false;
  updatePlayButton();

  clearInterval(slideshowTimer);
  slideshowTimer = null;
}

function toggleSlideshow() {
  if (isPlaying) {
    pauseSlideshow();
  } else {
    startSlideshow();
  }
}

function updatePlayButton() {
  const btn = document.getElementById("slideshowBtn");
  btn.textContent = isPlaying ? "‚è∏" : "‚ñ∂";
}

/* ===============================
   EXIT
================================ */
function exitViewer() {
  pauseSlideshow();
  window.location.href = `album.html?album=${albumId}`;
}

/* ===============================
   KEYBOARD
================================ */
document.addEventListener("keydown", e => {
  if (e.key === "ArrowRight") nextImage();
  if (e.key === "ArrowLeft") prevImage();
  if (e.key === "Escape") exitViewer();
});
</script>

</body>
</html>